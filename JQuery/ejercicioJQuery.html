<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>JavaScript demo</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script defer>
            $(document).ready(function(){
                $("#formulario").hide();
                
                $("#registrar").click(function(e){
                   
                    $("#formulario").slideToggle();
                    
                });

                $("#enviar").click(function(e) {
                    e.preventDefault();

                    // Validación
                    let nombreyApellidos = $("#nombreyApellidos").val().trim();
                    let email = $("#email").val().trim();
                    let phone = $("#phone").val().trim();
                    let contraseña = $("#contraseña").val().trim();
                    let isValid = true;

                    // Validar nombres y apellidos
                    if (!/^[A-Za-záéíóúüñÁÉÍÓÚÜ\s]+$/.test(nombreyApellidos) || nombreyApellidos.split(/\s+/).length < 2) {
                        alert("El nombre y apellidos deben contener al menos dos palabras, solo letras.");
                        isValid = false;
                    }

                    // Validar email
                    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                        alert("Por favor, ingresa un email válido.");
                        isValid = false;
                    }

                    // Validar teléfono
                    if (!/^\d+$/.test(phone)) {
                        alert("El teléfono debe contener solo números, sin espacios.");
                        isValid = false;
                    }

                    // Validar contraseña
                    if (!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,}$/.test(contraseña)) {
                        alert("La contraseña debe tener al menos 8 caracteres, con al menos una mayúscula, una minúscula y un número.");
                        isValid = false;
                    }

                    
                    if (isValid) {
                        alert("Formulario enviado correctamente.");
                        $('#salida').attr("src", 'https://img.freepik.com/vector-gratis/marca-verificacion-doble-circulo-verde_78370-1749.jpg?semt=ais_hybrid');
                    }else{
                        $('#salida').attr("src", 'https://www.plenainclusion.org/wp-content/uploads/2022/02/error-cruz-roja-dentro-de-circulo-rojo.png');
                    }
                });

                $("#cancelar").click(function(e) {
                    e.preventDefault();
                    $("#formulario").hide();
                });
                
            });
        </script>
    </head>
    <body style="background-color: beige;">
        <button id="registrar" class="btn btn-primary">Registrar</button>
        <div id="divPrincipal" class="d-flex justify-content-center align-items-center">
            <form id="formulario">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="inputGroup-sizing-default">Nombre y apellidos:</span>
                    </div>
                    <input id="nombreyApellidos" type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                </div>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="inputGroup-sizing-default">Email:</span>
                    </div>
                    <input id="email" type="email" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                </div>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="inputGroup-sizing-default">telefono:</span>
                    </div>
                    <input id="phone" type="tel" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                </div>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="inputGroup-sizing-default">Contraseña:</span>
                    </div>
                    <input id="contraseña" type="password" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                </div>
                <div>
                    <button id="enviar" class="btn btn-primary" type="submit">Enviar</button>
                    <button id="cancelar" class="btn btn-primary" type="submit">Cancelar</button>
                </div>
            </form>
            
        </div>
        <div class="d-flex justify-content-center align-items-center"><img id="salida" width="25%"></div>
    </body>
</html>